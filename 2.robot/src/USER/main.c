#include "led.h"
#include "delay.h"
#include "key.h"
#include "sys.h"
#include "usart.h"

 
#include "sg90.h"
#include "robot.h"

int main(void)
{
	u16 led0pwmval=0;
	u8 dir=1;
	u8 i;

	delay_init();	    	 //????????????
	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2); 	 //????NVIC?ж????2:2λ??????????2λ????????
	uart_init(115200);	 //?????????115200
 	LED_Init();			     //LED???????
	
 	TIM3_PWM_Init(20000-1,72-1);	 // ???????PWM???=72000000/72/20000=20hz ?? 20ms
	TIM3_Int_Init(20000-1,72-1);	 // ??????ж?????		// tips: Int??PWM??????????????????????
	
	Set_RobotPT(0);			// ???????????
	delay_ms(5000);
	
   	while(1)
	{
		Module_Pallet1();
		
//		
//		Enable_axle1(180,1);
//		
//		delay_ms(4);
		
		
//		Enable_axle1(0,90,1);
//		delay_ms(5000);
		
// 		delay_ms(10);		// 400*10 ms ???????
//		origin_PT(0);
//		
//		delay_ms(500);
//		
//		Enable_Robot(ONE,0,5);
//		printf("?????? %d \r\n", 1);
//		Enable_Robot(ONE,0,5);
//		
//		origin_PT(180);
//		
//		
//		delay_ms(1500);
//	//	printf("?????? %d \r\n", 2);	
//		
//		
		
	/*??		
		//LED1 = 0;
		
//		for (i =0; i < 180; i++)
//		{
//			ANGLE1(i);
//			delay_us(500);			// ?????????????---
//		}
//		
		ANGLE1(180);
		TIM_SetCompare2(TIM3,led0pwmval = 19500);				// 0??????????????????????    ??С?????????900??PWM????init???????С????????δ??????????????????????????????700?? ??  	
//		TIM_SetCompare1(TIM3,led0pwmval = 19500);
		delay_ms(5000);
		printf("CCR2 ?????? %d \r\n", led0pwmval);  // ?????CCRx ??
												
		TIM_SetCompare2(TIM3,led0pwmval = 18500);
		TIM_SetCompare1(TIM3,led0pwmval = 17500);
		delay_ms(5000);
		printf("CCR2 ?????? %d \r\n", led0pwmval);  // ?????CCRx ??
		
		//LED0_PWM_VAL = led0pwmval;	 		//  CCR2 
	
		*/
	}

}

